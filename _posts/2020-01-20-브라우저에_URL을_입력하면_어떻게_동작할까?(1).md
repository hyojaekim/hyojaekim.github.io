---
layout: post
title: "[작성중] 브라우저에 URL을 입력하면 어떻게 동작할까? (1)"
date: 2020-01-20 03:21:35
image: '/assets/img/'
description: '브라우저에 URL을 입력하고, 웹 페이지가 보여지기까지의 과정을 설명합니다.'
tags:
- network
- web
categories:
- Network
---

> 성공과 실패를 결정하는 1%의 네트워크 원리를 읽고 정리합니다.

웹 브라우저에 URL을 입력하고, 우리 눈에 보이는 순간까지의 내용을 다룰려고 합니다. `먼저 웹 브라우저가 어떻게 동작하는지 알아보겠습니다.`

---

## HTTP 리퀘스트 메시지 작성

#### \* URL 입력

![URL 입력](/assets/img/network(1)/URL_입력.png)

위 URL은 `HTTP 프로토콜로 웹 서버에 액세스(접근) 하는 경우`입니다. **프로토콜**은 통신 동작의 규칙으로 쉽게 얘기하자면, **하나의 약속이라고 볼 수 있습니다.** HTTP 프로토콜 이외에도 여러 프로토콜이 존재하니, 한번 찾아봐도 괜찮을 것 같습니다.

---

#### \* 브라우저는 먼저 URL을 해독합니다.

**브라우저**라고 하는 것은 **웹에 연결시켜주는 도구로, 우리가 흔히 사용하고 있는 인터넷 익스플로어나, 크롬 등을 말합니다.**
URL을 입력하고 `브라우저가 처음으로 하는 일은 URL을 해독합니다.`

![URL 해독](/assets/img/network(1)/URL_해독.png)

URL을 해독할 때는 먼저 위와 같이 **요소를 따로따로 분해합니다.** `/home/index.html의 의미`는 **home 디렉토리 아래에 있는 `'index.html'` 파일에 액세스한다는 의미입니다.**

---

#### \* 파일명을 생략한다면?

다음과 같이 파일명을 생략할 수 있습니다.

```
http://www.hyojaekim.co.kr/home/
```

`/로 끝난 것은 /home/의 다음에 써야 할 파일명을 생략한다는 것`입니다. URL의 규칙에는 이와 같이 생략해도 좋지만, **파일명을 명시하지 않으면 어느 파일에 액세스해야 할지 모릅니다.** 그래서 `서버측에 설정해두어야 원하는 결과를 볼 수 있습니다.`

보통 네이버나 구글에 접속할 때에 `www.google.com`이나 `www.google.com/`으로 접속해도 원하는 결과를 볼 수 있지 않나요?

```
http://www.hyojaekim.co.kr/

/라는 디렉토리가 지정되고 파일명은 생략했다고 볼 수 있습니다.



http://www.hyojaekim.co.kr

/까지 생략하면 지나친 생략일 수 있지만, 이렇게 쓰는 방법도 인정되고 있습니다.

아무것도 없는 경우에는 루트 디렉토리 아래에 있는 미리 설정된 파일명을 액세스한다는 의미로 사용하고 있습니다.
```

지금까지 브라우저가 **가장 먼저 하는 일인 URL을 해독**하는 것을 봤습니다. `URL을 해독하면 어디에 액세스 해야 하는지 판명됩니다.` **그 후에는 브라우저는 HTTP 프로토콜을 사용해 웹 서버에 액세스 해야 합니다.**

---

#### \* HTTP 프로토콜이 뭐죠?

HTTP 프로토콜은 **클라이언트와 서버가 주고받는 `메시지의 내용이나 순서`를 지키기 위한 약속입니다.** 먼저 클라이언트(브라우저)는 서버를 향해 리퀘스트 메시지를 보냅니다. `리퀘스트 메시지에는 '무엇을', '어떻게 해서' 하겠다는 내용`이 있습니다.

![클라이언트에서 서버로 리퀘스트 메시지 전송](/assets/img/network(1)/클라이언트에서_서버로_메시지_전송.png)

**`'무엇을'`에 해당하는 것이 `URI(Uniform Resource Identifier)`라고 합니다.** 이렇게 얘기하면 어떤걸 의미하는지 감이 오지 않을 수 있습니다. 보통 파일명을 URI로 쓰는데 예를 들자면, '/home/index.html' 또는 http:로 시작하는 URL을 그대로 쓸수 있습니다. **`액세스 대상을 통칭하는 것`이라고 기억하면 좋을것 같습니다.**

**`'어떻게 해서'`에 해당하는 것이 `메소드(Method)`로,** 개발 하면서 많이 들어본 단어일 수 있습니다. 메소드는 `어떠한 동작`을 의미합니다. **즉, `웹 서버에게 어떤 동작`을 하고 싶은지 전달합니다.**

이렇게 '무엇을', '어떻게 해서' 하겠다는 **리퀘스트 메시지가 웹 서버에 도착하면 `웹 서버는 그 내용을 해독`하여 `결과 데이터를 응답 메시지에 저장`합니다.**

![클라이언트와 서버간의 메시지 주고 받기](/assets/img/network(1)/클라이언트와_서버간의_메시지_주고받기.png)

**응답 메시지 앞 부분에는 `스테이터스 코드(Status Code)`가 있습니다.** 스테이터 코드는 `정상적으로 응답했는지, 이상이 있는지를 나타내는 코드`라고 보시면 됩니다.

> HTTP 스테이터스 코드와 메소드에 대해서 더 알고 싶은 분은 [해당 링크](https://developer.mozilla.org/ko/docs/Web/HTTP)를 참고해 주세요.

---

#### \* HTTP 메시지는 어떻게 생겼을까?

URL을 해독하고 웹 서버와 파일명을 판단하면 브라우저는 이를 바탕으로 `HTTP의 리퀘스트 메시지를 만듭니다.` **메시지에는 `어떤 규칙`이 있고, `어떤 형식`으로 이루어져 있는지 알아보겠습니다.**

![HTTP 메시지의 포맷](/assets/img/network(1)/HTTP_메시지의_포맷.png)

---

#### \* HTTP 리퀘스트 메시지

![HTTP 리퀘스트 메시지(1)](/assets/img/network(1)/HTTP_리퀘스트_메시지_(1).png)

첫 번째 행을 **`리퀘스트 라인`이라고 합니다.** `리퀘스트 라인`만 봐도 `어떤 요청인지 대략 짐작`할 수 있으며 `메소드`, `URL`, `HTTP 버전` 각각을 `공백`으로 구분하여 행을 이룹니다.

---

![HTTP 리퀘스트 메시지(2)](/assets/img/network(1)/HTTP_리퀘스트_메시지_(2).png)

두 번째 행을 **`메시지 헤더`라고 합니다.** `한 행에 한 개의 헤더 필드`를 쓰며, `부가적인 정보를 나타내기 위해` 사용합니다.

> 메시지 헤더에 대해서 더 알고 싶은 분은 [해당 링크](https://developer.mozilla.org/ko/docs/Web/HTTP/Headers)를 참고해 주세요.

행 수는 정해져 있는 것이 아니라 이를 구분하기 위해 공백 행을 추가해야 합니다. **즉, 메시지 헤더의 범위는 `첫 번째 헤더 필드부터 공백 행`까지가 됩니다.**

---

![HTTP 리퀘스트 메시지(3)](/assets/img/network(1)/HTTP_리퀘스트_메시지_(3).png)

메시지 헤더를 쓰고 나면 `공백 행`을 넣는데, `그 뒤에 송신할 데이터`를 씁니다. **이 부분을 `메시지 본문`이라 합니다.**

GET 요청인 경우에는 송신할 데이터가 없고, `POST`인 경우에 `송신할 데이터`를 씁니다. 웹 사이트를 이용하면서 게시글에 글을 쓰거나, 댓글을 달면 사용자가 입력 할 데이터가 이 부분에 쓰여집니다.

---

#### \* HTTP 응답 메시지

웹 서버로 메시지를 보내면, 이에 맞게 **웹 서버에서 `정상적으로 종료`했는지, `오류`가 발생했는지 `응답`이 와야 합니다.**

응답 메시지는 리퀘스트 메시지와 비슷하지만, `한 가지 다른점`이 있습니다. 바로, `첫 번째 행` 입니다. 서로 비교해보겠습니다.

![요청 메시지와 응답 메시지의 차이](/assets/img/network(1)/요청_메시지와_응답_메시지의_차이.png)

**`스테이터스 코드`와 `응답 문구`는 `응답이 어떻게 왔는지` 알 수 있습니다.** 이 둘은 차이가 있습니다.

![스테이터스 코드와 응답 문구의 차이](/assets/img/network(1)/스테이터스_코드와_응답_문구의_차이.png)

**`스테이터스는 숫자로` 나타내며, `주로 프로그램 등에 실행 결과를 알려주는 것`이 목적입니다. `응답 문구는 문장으로` 나타내며, `사람에게 실행 결과를 알리는 것`이 목적입니다.**

---

#### \* 마무리

지금까지 브라우저가 URL을 해독하고, 리퀘스트 메시지는 무엇을 전달하는지, 웹 서버로부터 받은 응답 메시지에는 어떤 내용이 있는지 알아봤습니다.

지금까지 보면 메시지를 생성하고, 곧 바로 웹 서버로 전송하는 것처럼 보입니다. 하지만 메시지를 만들면 OS에 의뢰하여 웹 서버에 송신하는데 다음 글은 이 부분을 다루도록 하겠습니다.
